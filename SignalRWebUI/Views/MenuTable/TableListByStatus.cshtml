@{
	ViewData["Title"] = "Index";
	Layout = "~/Views/AdminLayout/Index.cshtml";
	string color = "";
}
@using SignalR.DtoLayer.MenuTableDtos
@model List<ResultMenuTableDto>

	<script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>
<script src="~/Ready-Bootstrap-Dashboard-master/assets/js/core/jquery.3.2.1.min.js"></script>
<script src="~/Ready-Bootstrap-Dashboard-master/assets/js/core/bootstrap.min.js"></script>

<script>
	$(document).ready(() => {
		console.log("document ready");
		var connection = new signalR.HubConnectionBuilder().withUrl("https://localhost:7298/SignalRHub").build();

		connection.start().then(() => {

			setInterval(() => {
				connection.invoke("SendMenuTable");

			}, 1000);

		}).catch((err) => {
			console.log(err);
		});

		connection.on("ReceiveMenuTable", (value) => {
			console.log(value);
		});
		


	});
</script>



<div class="content">
	<div class="container-fluid">
		<h4 class="page-title">MenuTable Panel</h4>
		<div class="row">
			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						<div class="card-title"> MenuTable List</div>
						<div><a asp-action="Index"> Table List</a></div>
					</div>
					<div class="card-body">


						<div class="row">

							@foreach(var item in Model){

								@if (item.Status)
								{
									color = "card card-stats card-success h-75 d-flex flex-column";
								}
								else
								{
									color = "card card-stats card-danger h-75 d-flex flex-column";
								}
								<div class="col-md-3">
									<a asp-action="ChangeMenuTableStatus" asp-route-id="@item.Id">
										<div class="@color">
											<div class="card-body ">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="la la-certificate"></i>
														</div>
													</div>
													<div class="col-7 d-flex align-items-center">
														<div class="numbers">
															<p class="card-category">@item.Name</p>
															<h4 class="card-title" id="CategoryCount"> @item.Status</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</a>
								</div>
							}
							


						</div>



					</div>
				</div>

			</div>

		</div>
	</div>
</div>